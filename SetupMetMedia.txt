# Intsllation metmedia

Boot from USB
minimale Installation mir Installation 3rd Party Treiber
4 Platten a 2TB im HW Raid und Einschub
1 Platte 1TB mit 20GB Systempartition Swap und 980GB Partition
2. LAN Adapter per Bios deaktiviert


##############################
Partitionsschema

Swap als Swap
sda1 20GB als root
sda3 980GB als /metshare/980GB 
/dev/mapper (Raid) aös /metshare/5.6TB

##############################

IP über Network Manager macht Probleme da ich niche weiß wo ich die Suchdoamin eintragen soll

download jkameron.key und sources-bionic.list von metmirror/software

sudo apt-key add jkameron.asc
sudo apt update
sudo apt upgrade

sudo apt install net-tools

sudo apt install ssh

sudo gedit /etc/ssh/sshd_config

		# auf Zeile 36 hinzufügen
		PermitRootLogin yes

sudo service ssh restart

sudo sudo
#root 
	passwd "neues root passwort"
#root exit

neue Datei /etc/interfaces/ kopieren !! Auf den genauen Namen des Interfaces achten
"""""
		# Generatetd by BBG 20180711
		# The loopback network interface
		auto lo
		iface lo inet loopback
		# eth0
		auto enp0s25
		iface enp0s25 inet static
			address 192.168.121.90
			netmask 255.255.255.0
			gateway 192.168.121.254
			brodcast 192.168.121.255
			dns-nameservers 192.168.121.100
			dns-domain met.local
""""

sudo apt remove network-manager

## REBOOT ##

den symbolischen Link /etc/resolf.conf löschen
neue datei /etc/resolf.conf einfügen

""""
# Generated by BBG
nameserver 192.168.121.100
domain met.local

#!!! ACHTUNG keine Einrückung
""""

Danach klappt die Namensauflösung innerhalb des Schiffes

# als root per ssh 

apt install webmin

apt install mailutils ssmtp

edit /etc/ssmtp/ssmtp.conf

""""

#
# Config file for sSMTP sendmail
#
# The person who gets all mail for userids < 1000
# Make this empty to disable rewriting.
root=sysman@meteor.briese-research.de

# The place where the mail goes. The actual machine name is required no 
# MX records are consulted. Commonly mailhosts are named mail.domain.com
mailhub=mailserver

# Where will the mail seem to come from?
#rewriteDomain=

# The full hostname
hostname=metmedia

# Are users allowed to set their own From: address?
# YES - Allow the user to specify their own From: address
# NO - Use the system generated From: address
FromLineOverride=YES
""""""
edit /etc/ssmtp/revaliases

""""""
# sSMTP aliases
# 
# Format:	local_account:outgoing_address:mailhub
#
# Example: root:your_login@your.domain:mailhub.your.domain[:port]
# where [:port] is an optional port number that defaults to 25.
root:sysman@meteor.briese-research.de

"""""""

Danach kann das System mails an den Sysman verschicken

apt install samba
apt install smartmontools

####
apt install ntp	

edit /etc/ntp.conf

pools deaktivieren mit #

einfügen "server 192.168.151.201 iburst"
####

timedatectl set-timezone UTC

#####

chmod -R 2775 /metshare
chgrp -R meteorusers /metshare

!! Achtung in Samba muss unter global obay pam restrictions = no sein  !!!

nur valid user wenn nur ein user aus der gruppe zugriff haben soll

#####

neue benutzer mit ID <1000 bekommen keinen Gnome Login

VINO einschalten

gsettings set org.gnome.Vino require-encryption false
git



